let autoplayVideos=[],AutoplayVideo=function(el){this.videoHolder=el,this.video=this.videoHolder.querySelector(".js-autoplay-video__video"),this.imageRevertRunning=!1,this.addDefaultControlsRunning=!1,this.addCustomControlsRunning=!1,this.video.play().then(_=>{}).catch(error=>{this.imageRevert()})};function autoplayVideoInit(){let autoplayVideoItems=document.querySelectorAll(".js-autoplay-video");for(let i=0;i<autoplayVideoItems.length;i++){let thisAutoplayVideo=new AutoplayVideo(autoplayVideoItems[i]);autoplayVideos.push(thisAutoplayVideo)}}function autoplayVideoRunner(){if(autoplayVideos.length)for(let i=0;i<autoplayVideos.length;i++)i+1==autoplayVideos.length&&(autoplayVideos=[],setTimeout(function(){autoplayVideoInit()},100));else autoplayVideoInit()}AutoplayVideo.prototype.imageRevert=function(){this.imageRevertRunning=!0,this.video.classList.add("hide"),this.videoHolder.querySelector(".js-autoplay-video__img")&&this.videoHolder.querySelector(".js-autoplay-video__img").classList.add("show")};let carousels=[],BasicCarousel=function(el){this.el=el,this.holder=this.el.querySelector(".js-basic-carousel__holder"),this.category=this.el.querySelectorAll(".js-basic-carousel__category"),this.carousel,this.currentSlide=0,this.running=!1,this.handleBtnClickListener=this.handleBtnClick.bind(this),this.handleResizeListener=this.handleResize.bind(this),window.addEventListener("resize",this.handleResizeListener),"locations"==this.el.dataset.carouselType||"case-studies"==this.el.dataset.carouselType?window.innerWidth<960&&this.setupCarousel():this.setupCarousel(),this.category&&this.setupButtons(),"jobs"==this.el.dataset.carouselType&&(this.moreBtn=this.el.querySelectorAll(".js-basic-carousel__more-btn"),this.moreBtnListener=this.moreBtnClick.bind(this),this.setupMoreBtns())};function basicCarouselInit(){let carouselItems=document.querySelectorAll(".js-basic-carousel");for(let i=0;i<carouselItems.length;i++){let thisCarousel=new BasicCarousel(carouselItems[i]);carousels.push(thisCarousel)}}function basicCarouselRunner(){if(carousels.length)for(let i=0;i<carousels.length;i++)carousels[i].destroy(),i+1==carousels.length&&(carousels=[],setTimeout(function(){basicCarouselInit()},300));else basicCarouselInit()}BasicCarousel.prototype.setupCarousel=function(){"locations"==this.el.dataset.carouselType?this.perPage=1.1:this.perPage=1,this.running=!0,this.carousel=new Siema({selector:this.holder,duration:400,easing:"ease",startIndex:0,draggable:!0,multipleDrag:!0,threshold:100,loop:!1,perPage:this.perPage,onChange:this.handleChange.bind(this)}),this.currentSlide=this.carousel.currentSlide},BasicCarousel.prototype.setupButtons=function(){for(var i=0;i<this.category.length;i++)this.category[i].addEventListener("click",this.handleBtnClickListener)},BasicCarousel.prototype.setupMoreBtns=function(){for(var i=0;i<this.moreBtn.length;i++)this.moreBtn[i].addEventListener("click",this.moreBtnListener)},BasicCarousel.prototype.handleChange=function(){if(this.currentSlide=this.carousel.currentSlide,this.category)for(var i=0;i<this.category.length;i++)this.category[i].classList.remove("active"),this.category[this.currentSlide].classList.add("active")},BasicCarousel.prototype.handleBtnClick=function(e){e.preventDefault(),this.index=Array.prototype.indexOf.call(this.category,e.currentTarget),this.carousel.goTo(this.index)},BasicCarousel.prototype.moreBtnClick=function(e){e.preventDefault(),e.currentTarget.previousElementSibling.classList.add("show"),e.currentTarget.parentNode.removeChild(e.currentTarget),e.currentTarget.removeEventListener("click",this.moreBtnListener)},BasicCarousel.prototype.handleResize=function(){"locations"==this.el.dataset.carouselType&&window.innerWidth<960&&0==this.running?this.setupCarousel():"locations"==this.el.dataset.carouselType&&window.innerWidth>=960&&1==this.running&&this.destroy(),"case-studies"==this.el.dataset.carouselType&&window.innerWidth<960&&0==this.running?this.setupCarousel():"case-studies"==this.el.dataset.carouselType&&window.innerWidth>=960&&1==this.running&&this.destroy()},BasicCarousel.prototype.destroy=function(e){if(1==this.running){if(this.carousel.destroy(!0),this.carousel="",this.category)for(var i=0;i<this.category.length;i++)this.category[i].removeEventListener("click",this.handleBtnClickListener);this.running=!1}};var clocks=[],Clock=function(el){this.el=el,moment.tz.add(["Europe/London|LMT GMT BST BDST|1.f 0 -10 -20|01212121212121212121212121212121212121212121212121232323232321212321212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-4VgnW.J 2KHdW.J Rc0 1fA0 14M0 1fc0 1g00 1co0 1dc0 1co0 1oo0 1400 1dc0 19A0 1io0 1io0 WM0 1o00 14o0 1o00 17c0 1io0 17c0 1fA0 1a00 1lc0 17c0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1cM0 1io0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1io0 1qM0 Dc0 2Rz0 Dc0 1zc0 Oo0 1zc0 Rc0 1wo0 17c0 1iM0 FA0 xB0 1fA0 1a00 14o0 bb0 LA0 xB0 Rc0 1wo0 11A0 1o00 17c0 1fA0 1a00 1fA0 1cM0 1fA0 1a00 17c0 1fA0 1a00 1io0 17c0 1lc0 17c0 1fA0 1a00 1io0 17c0 1io0 17c0 1fA0 1a00 1a00 1qM0 WM0 1qM0 11A0 1o00 WM0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1tA0 IM0 90o0 U00 1tA0 U00 1tA0 U00 1tA0 U00 1tA0 WM0 1qM0 WM0 1qM0 WM0 1tA0 U00 1tA0 U00 1tA0 11z0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 14o0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|10e6","America/New_York|EST EDT|50 40|0101|1Lz50 1zb0 Op0","Asia/Singapore|LMT SMT +07 +0720 +0730 +09 +08|-6T.p -6T.p -70 -7k -7u -90 -80|01234546|-2M0ST.p aIM0 17anT.p l5XE 17bO 8Fyu 1so1u|56e5"]),"digital"==this.el.dataset.clockType?this.runDigital():this.runAnalog()};function initClock(){for(var clock=document.querySelectorAll(".js-clock"),i=0;i<clock.length;i++){const thisClock=new Clock(clock[i]);clocks.push(thisClock)}}function clockRunner(){if(clocks.length)for(var i=0;i<clocks.length;i++)clocks[i].destroy(),i+1==clocks.length&&(clocks=[],setTimeout(function(){initClock()},300));else initClock()}Clock.prototype.runDigital=function(){"UK"==this.el.dataset.clockLocation?this.time=moment().tz("Europe/London").format("HH:mm:ss"):"New York"==this.el.dataset.clockLocation?this.time=moment().tz("America/New_York").format("HH:mm:ss"):"Singapore"==this.el.dataset.clockLocation&&(this.time=moment().tz("Asia/Singapore").format("HH:mm:ss")),this.timeArray=this.time.split(":"),this.hour=this.timeArray[0],this.min=this.timeArray[1],this.el.innerHTML=this.hour+":"+this.min,requestAnimationFrame(this.runDigital.bind(this))},Clock.prototype.runAnalog=function(){this.hourHand=this.el.querySelector(".clock__hand--hour"),this.minHand=this.el.querySelector(".clock__hand--min"),"UK"==this.el.dataset.clockLocation?this.time=moment().tz("Europe/London").format("HH:mm:ss"):"New York"==this.el.dataset.clockLocation?this.time=moment().tz("America/New_York").format("HH:mm:ss"):"Singapore"==this.el.dataset.clockLocation&&(this.time=moment().tz("Asia/Singapore").format("HH:mm:ss")),this.timeArray=this.time.split(":"),this.hour=this.timeArray[0]%12,this.min=this.timeArray[1],this.sec=this.timeArray[2],this.ms=this.timeArray[2]/1e3,this.hourRotation=30*this.hour+.5*this.min,this.minRotation=6*this.min+.1*this.sec,this.hourHand.style.transform="rotate("+this.hourRotation+"deg)",this.minHand.style.transform="rotate("+this.minRotation+"deg)",requestAnimationFrame(this.runAnalog.bind(this))},Clock.prototype.destroy=function(){cancelAnimationFrame(this.runDigital.bind(this)),cancelAnimationFrame(this.runAnalog.bind(this))};let displacementLoops=[];const DisplacementLoop=function(opts){const THAT=this;this.parent=opts.parent;let image,dispImage=opts.displacementImage,images=opts.images,sliderImages=[],renderW=this.parent.offsetWidth,renderH=this.parent.offsetHeight;this.scene=new THREE.Scene,this.camera=new THREE.OrthographicCamera(renderW/-2,renderW/2,renderH/2,renderH/-2,1,1e3),this.camera.position.z=1,this.renderer=new THREE.WebGLRenderer({antialias:!1}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(16777215,1),this.renderer.setSize(renderW,renderH),this.parent.appendChild(this.renderer.domElement);let loader=new THREE.TextureLoader;loader.crossOrigin="",images.forEach(img=>{let disp=loader.load(dispImage);disp.wrapS=disp.wrapT=THREE.RepeatWrapping,(image=loader.load(img.dataset.bg)).magFilter=image.minFilter=THREE.LinearFilter,image.anisotropy=this.renderer.capabilities.getMaxAnisotropy(),sliderImages.push(image)});var disp=loader.load(dispImage);disp.wrapS=disp.wrapT=THREE.RepeatWrapping;let mat=new THREE.ShaderMaterial({uniforms:{effectFactor:{type:"f",value:-.65},dispFactor:{type:"f",value:0},currentImage:{type:"t",value:sliderImages[0]},nextImage:{type:"t",value:sliderImages[1]},disp:{type:"t",value:disp}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  ",fragmentShader:"\n    varying vec2 vUv;\n\n    uniform sampler2D currentImage;\n    uniform sampler2D nextImage;\n    uniform sampler2D disp;\n\n    uniform float dispFactor;\n    uniform float effectFactor;\n\n    void main() {\n\n      vec2 uv = vUv;\n\n      vec4 disp = texture2D(disp, uv);\n\n      vec2 distortedPosition = vec2(uv.x - dispFactor * (disp.r*effectFactor), uv.y);\n      vec2 distortedPosition2 = vec2(uv.x + (1.0 - dispFactor) * (disp.r*effectFactor), uv.y);\n\n      vec4 _currentImage = texture2D(currentImage, distortedPosition);\n      vec4 _nextImage = texture2D(nextImage, distortedPosition2);\n\n      vec4 finalTexture = mix(_currentImage, _nextImage, dispFactor);\n\n      gl_FragColor = finalTexture;\n\n    }\n  ",transparent:!0,opacity:1}),geometry=new THREE.PlaneBufferGeometry(this.parent.offsetWidth,this.parent.offsetHeight,1),object=new THREE.Mesh(geometry,mat);this.scene.add(object);!function(){mat.uniforms.nextImage.value=sliderImages[0],mat.uniforms.nextImage.needsUpdate=!0;var tl=new TimelineMax({repeat:-1});let images=THAT.parent.querySelectorAll(".displacement-loop__img");for(let i=0;i<images.length;i++){let nextImageIndex=i+1;i+1==images.length&&(nextImageIndex=0),tl.to(mat.uniforms.dispFactor,4,{delay:1,value:1,ease:Expo.easeInOut,onComplete:function(){mat.uniforms.currentImage.value=sliderImages[i],mat.uniforms.currentImage.needsUpdate=!0,mat.uniforms.dispFactor.value=0,mat.uniforms.nextImage.value=sliderImages[nextImageIndex]}})}}(),this.handleResize=function(){THAT.camera.aspect=THAT.parent.offsetWidth/THAT.parent.offsetHeight,THAT.camera.updateProjectionMatrix(),THAT.renderer.setPixelRatio(window.devicePixelRatio),THAT.renderer.setSize(THAT.parent.offsetWidth,THAT.parent.offsetHeight)},window.addEventListener("resize",this.handleResize),this.animate=function(){requestAnimationFrame(THAT.animate),THAT.renderer.render(THAT.scene,THAT.camera)},this.animate()};function displacementLoopinit(){let loopItems=document.querySelectorAll(".displacement-loop");for(let i=0;i<loopItems.length;i++){const imgs=loopItems[i].querySelectorAll(".displacement-loop__img"),thisLoop=new DisplacementLoop({parent:loopItems[i],images:imgs,displacementImage:loopItems[i].dataset.displacement});displacementLoops.push(thisLoop)}}function displacementLoopRunner(){if(displacementLoops.length)for(let i=0;i<displacementLoops.length;i++)displacementLoops[i].destroy(),i+1==displacementLoops.length&&(displacementLoops=[],setTimeout(function(){displacementLoopinit()},300));else displacementLoopinit()}DisplacementLoop.prototype.destroy=function(){cancelAnimationFrame(this.animate),this.renderer.forceContextLoss(),this.renderer.context=null,this.renderer.domElement=null,window.removeEventListener("resize",this.handleResize)};let dotCarousels=[],DotCarousel=function(el){const THAT=this;this.el=el,this.holder=this.el.querySelector(".js-dot-carousel__holder"),this.realItem=this.el.querySelectorAll(".js-dot-carousel__real-item"),this.img=this.el.querySelectorAll(".js-dot-carousel__img"),this.buttons=this.el.querySelector(".js-dot-carousel__btn"),this.prevBtn=this.el.querySelector(".js-dot-carousel__btn--prev"),this.nextBtn=this.el.querySelector(".js-dot-carousel__btn--next"),this.currentIndicator=this.el.querySelector(".js-dot-carousel__current"),this.totalIndicator=this.el.querySelector(".js-dot-carousel__total"),this.carousel,this.currentSlide=0,this.totalIndicator.innerText=this.holder.children.length,this.handleBtnClickListener=this.handleBtnClick.bind(this),this.setupCanvas(),this.setupCarousel(),this.setupButtons(),this.autoPlayRunning,this.autoPlaying=setInterval(function(){THAT.autoPlayRunning=!0,THAT.autoPlay()},8e3)};function dotCarouselInit(){let carouselItems=document.querySelectorAll(".js-dot-carousel");for(let i=0;i<carouselItems.length;i++){let thisCarousel=new DotCarousel(carouselItems[i]);dotCarousels.push(thisCarousel)}}function dotCarouselRunner(){if(dotCarousels.length)for(let i=0;i<dotCarousels.length;i++)dotCarousels[i].destroy(),i+1==dotCarousels.length&&(dotCarousels=[],setTimeout(function(){dotCarouselInit()},300));else dotCarouselInit()}DotCarousel.prototype.setupCanvas=function(){const THAT=this;this.parent=document.querySelector(".displacement-carousel");let dispImage=this.parent.dataset.displacement,images=this.parent.querySelectorAll(".displacement-carousel__img"),image=[];this.sliderImages=[];let renderW=this.parent.offsetWidth,renderH=this.parent.offsetHeight;this.requestAnimationFrameID=null,this.scene=new THREE.Scene,this.camera=new THREE.OrthographicCamera(renderW/-2,renderW/2,renderH/2,renderH/-2,1,1e3),this.camera.position.z=1,this.renderer=new THREE.WebGLRenderer({antialias:!1}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setClearColor(3422525,1),this.renderer.setSize(renderW,renderH),this.parent.appendChild(this.renderer.domElement);let loader=new THREE.TextureLoader;loader.crossOrigin="",images.forEach(img=>{let disp=loader.load(dispImage);disp.wrapS=disp.wrapT=THREE.RepeatWrapping,(image=loader.load(img.dataset.bg)).magFilter=image.minFilter=THREE.LinearFilter,image.anisotropy=this.renderer.capabilities.getMaxAnisotropy(),this.sliderImages.push(image)});var disp=loader.load(dispImage);disp.wrapS=disp.wrapT=THREE.RepeatWrapping,this.mat=new THREE.ShaderMaterial({uniforms:{effectFactor:{type:"f",value:-.65},dispFactor:{type:"f",value:0},currentImage:{type:"t",value:this.sliderImages[0]},nextImage:{type:"t",value:this.sliderImages[1]},disp:{type:"t",value:disp}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  ",fragmentShader:"\n    varying vec2 vUv;\n\n    uniform sampler2D currentImage;\n    uniform sampler2D nextImage;\n    uniform sampler2D disp;\n\n    uniform float dispFactor;\n    uniform float effectFactor;\n\n    void main() {\n\n      vec2 uv = vUv;\n\n      vec4 disp = texture2D(disp, uv);\n\n      vec2 distortedPosition = vec2(uv.x - dispFactor * (disp.r*effectFactor), uv.y);\n      vec2 distortedPosition2 = vec2(uv.x + (1.0 - dispFactor) * (disp.r*effectFactor), uv.y);\n\n      vec4 _currentImage = texture2D(currentImage, distortedPosition);\n      vec4 _nextImage = texture2D(nextImage, distortedPosition2);\n\n      vec4 finalTexture = mix(_currentImage, _nextImage, dispFactor);\n\n      gl_FragColor = finalTexture;\n\n    }\n  ",transparent:!0,opacity:1});let geometry=new THREE.PlaneBufferGeometry(this.parent.offsetWidth,this.parent.offsetHeight,1),object=new THREE.Mesh(geometry,this.mat);this.scene.add(object),window.addEventListener("resize",function(){THAT.camera.aspect=THAT.parent.offsetWidth/THAT.parent.offsetHeight,THAT.camera.updateProjectionMatrix(),THAT.renderer.setPixelRatio(window.devicePixelRatio),THAT.renderer.setSize(THAT.parent.offsetWidth,THAT.parent.offsetHeight)}),this.animate=function(){this.requestAnimationFrameID=requestAnimationFrame(THAT.animate),THAT.renderer.render(THAT.scene,THAT.camera)},this.animate()},DotCarousel.prototype.setupCarousel=function(){this.carousel=new Siema({selector:this.holder,duration:400,easing:"ease",startIndex:0,draggable:!0,multipleDrag:!1,threshold:100,loop:!0,perPage:1,onChange:this.handleChange.bind(this)}),this.currentSlide=this.carousel.currentSlide},DotCarousel.prototype.setupButtons=function(){this.nextBtn.addEventListener("click",this.handleBtnClickListener),this.prevBtn.addEventListener("click",this.handleBtnClickListener)},DotCarousel.prototype.autoPlay=function(){this.moveCarousel("next")},DotCarousel.prototype.handleChange=function(){if(!this.isAnimating){this.nextBtn.removeEventListener("click",this.handleBtnClickListener),this.prevBtn.removeEventListener("click",this.handleBtnClickListener),this.isAnimating=!0;const THAT=this;this.currentSlide=this.carousel.currentSlide;for(let i=0;i<this.realItem.length;i++)TweenLite.to(this.realItem[i],.5,{y:-40,opacity:0,ease:Power1.easeInOut,onComplete:function(){TweenLite.set(THAT.realItem[i],{clearProps:"all"}),TweenMax.staggerFromTo([".dot-carousel__logo",".dot-carousel__cs-title",".dot-carousel__excerpt",".dot-carousel__link"],.5,{x:-32,autoAlpha:0,ease:Power1.easeInOut},{delay:.1,x:0,autoAlpha:1,ease:Power1.easeInOut},.1),THAT.realItem[i].classList.remove("active"),THAT.realItem[THAT.currentSlide].classList.add("active"),THAT.img[i].classList.remove("active"),THAT.img[THAT.currentSlide].classList.add("active")}});this.currentIndicator.innerText=this.currentSlide+1,this.updateCanvas()}},DotCarousel.prototype.updateCanvas=function(){const THAT=this;this.mat.uniforms.nextImage.value=this.sliderImages[this.currentSlide],this.mat.uniforms.nextImage.needsUpdate=!0,TweenLite.to(this.mat.uniforms.dispFactor,2,{value:1,ease:Expo.easeInOut,onComplete:function(){THAT.mat.uniforms.currentImage.value=THAT.sliderImages[THAT.currentSlide],THAT.mat.uniforms.currentImage.needsUpdate=!0,THAT.mat.uniforms.dispFactor.value=0,THAT.setupButtons(),THAT.isAnimating=!1}})},DotCarousel.prototype.handleBtnClick=function(e){this.resetAutoPlay(),e.currentTarget.classList.contains("js-dot-carousel__btn--next")?this.moveCarousel("next"):this.moveCarousel("prev")},DotCarousel.prototype.moveCarousel=function(direction){"next"!=direction?this.carousel.prev():this.carousel.next()},DotCarousel.prototype.resetAutoPlay=function(){clearInterval(this.autoPlaying),this.autoPlayRunning=!1},DotCarousel.prototype.destroy=function(e){this.carousel.destroy(!0),this.carousel="",this.nextBtn.removeEventListener("click",this.handleBtnClickListener),this.prevBtn.removeEventListener("click",this.handleBtnClickListener),cancelAnimationFrame(this.requestAnimationFrameID),this.renderer.forceContextLoss(),this.renderer.context=null,this.renderer.domElement=null,clearInterval(this.autoPlaying)};let globes=[];class Scene{constructor(options){this.$el=options.el,this.texture=options.texture,this.time=0,this.requestAnimationFrameID=null,this.bindAll(),this.init()}bindAll(){this.render=this.render.bind(this),this.resizeListener=this.resize.bind(this)}init(){this.csGlobe=this.$el.classList.contains("contact-cta__globe"),this.canvasSize=600,this.csGlobe||(window.innerWidth>=960&&window.innerWidth<1200?this.canvasSize=800:window.innerWidth>=1200&&(this.canvasSize=1e3)),this.textureLoader=new THREE.TextureLoader,this.camera=new THREE.PerspectiveCamera(40,window.innerWidth/window.innerHeight,1,2e3),this.camera.position.z=200,this.camera.position.y=-70,this.camera.lookAt(new THREE.Vector3(0,0,0)),this.scene=new THREE.Scene,this.renderer=new THREE.WebGLRenderer({alpha:!0,antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.canvasSize,this.canvasSize),this.$el.appendChild(this.renderer.domElement),this.createParticles(),this.bindEvents(),this.resize(),this.render()}createParticles(){const plane=new THREE.SphereBufferGeometry(50,52,42);let vertexShader="\n      vec4 mod289(vec4 x) {\n        return x - floor(x * (1.0 / 289.0)) * 289.0;\n      }\n\n      vec4 permute(vec4 x) {\n        return mod289(((x*34.0)+1.0)*x);\n      }\n\n      vec4 taylorInvSqrt(vec4 r) {\n        return 1.79284291400159 - 0.85373472095314 * r;\n      }\n\n      vec2 fade(vec2 t) {\n        return t*t*t*(t*(t*6.0-15.0)+10.0);\n      }\n\n      // Classic Perlin noise\n      float cnoise(vec2 P) {\n        vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n        vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n        Pi = mod289(Pi); // To avoid truncation effects in permutation\n        vec4 ix = Pi.xzxz;\n        vec4 iy = Pi.yyww;\n        vec4 fx = Pf.xzxz;\n        vec4 fy = Pf.yyww;\n\n        vec4 i = permute(permute(ix) + iy);\n\n        vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n        vec4 gy = abs(gx) - 0.5 ;\n        vec4 tx = floor(gx + 0.5);\n        gx = gx - tx;\n\n        vec2 g00 = vec2(gx.x,gy.x);\n        vec2 g10 = vec2(gx.y,gy.y);\n        vec2 g01 = vec2(gx.z,gy.z);\n        vec2 g11 = vec2(gx.w,gy.w);\n\n        vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n        g00 *= norm.x;\n        g01 *= norm.y;\n        g10 *= norm.z;\n        g11 *= norm.w;\n\n        float n00 = dot(g00, vec2(fx.x, fy.x));\n        float n10 = dot(g10, vec2(fx.y, fy.y));\n        float n01 = dot(g01, vec2(fx.z, fy.z));\n        float n11 = dot(g11, vec2(fx.w, fy.w));\n\n        vec2 fade_xy = fade(Pf.xy);\n        vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n        float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n        return 2.3 * n_xy;\n      }\n\n      float map(float value, float oldMin, float oldMax, float newMin, float newMax) {\n        return newMin + (newMax - newMin) * (value - oldMin) / (oldMax - oldMin);\n      }\n\n      varying vec3 vUv;\n      varying float vTime;\n      varying float vZ;\n      uniform float time;\n\n      void main() {\n        vUv = position;\n        vTime = time;\n        vec3 newPos = position;\n        vec2 peak = vec2(1.0 - abs(.5 - uv.x), 1.0 - abs(.5 - uv.y));\n        vec2 noise = vec2(\n          map(cnoise(vec2(0.3 * time + uv.x * 5., uv.y * 5.)), 0., 1., -2., (peak.x * peak.y * 30.)),\n          map(cnoise(vec2(-0.3 * time + uv.x * 5., uv.y * 5.)), 0., 1., -2., 25.)\n        );\n\n        //newPos.x += noise.x * 10.;\n        newPos.z += noise.x * .06 * noise.y;\n        vZ = newPos.z;\n        vec4 mvPosition = modelViewMatrix * vec4( newPos, 1.0 );\n    ";this.csGlobe&&window.innerWidth<960?vertexShader+="\n          gl_PointSize = 18.0;\n          gl_Position = projectionMatrix * mvPosition;\n        }\n      ":vertexShader+="\n          gl_PointSize = 10.0;\n          gl_Position = projectionMatrix * mvPosition;\n        }\n      ";let fragmentShader="\n      varying vec3 vUv;\n      varying float vTime;\n      varying float vZ;\n      uniform sampler2D texture;\n\n      float map(float value, float oldMin, float oldMax, float newMin, float newMax) {\n        return newMin + (newMax - newMin) * (value - oldMin) / (oldMax - oldMin);\n      }\n\n      void main() {\n        vec3 colorA = vec3(.6, 0.17, 0.17);\n        vec3 colorB = vec3(0.17, 0.8, .7);\n        // vec3 color = mix(colorA, colorB, vUv.x * vUv.y);\n    ";this.csGlobe?fragmentShader+="\n        float alpha = map(vZ / 2.5, -1. / 2., 50. / 2., 0.17, 1.);\n        vec3 color = vec3(0.3, 0.5, 0.9);\n      ":fragmentShader+="\n        float alpha = map(vZ / 2., -1. / 2., 30. / 2., 0.17, 1.);\n        vec3 color = vec3(0.3, 0.5, 0.9);\n      ",fragmentShader+="\n        gl_FragColor = vec4(color, alpha);\n        gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );\n      }\n    ";const textureLoader=new THREE.TextureLoader;textureLoader.crossOrigin="";const material=new THREE.ShaderMaterial({uniforms:{time:{value:1},texture:{value:textureLoader.load(this.texture)},resolution:{value:new THREE.Vector2}},vertexShader:vertexShader,fragmentShader:fragmentShader,blending:THREE.AdditiveBlending,transparent:!0});this.csGlobe&&(material.blending=THREE.NoBlending),this.particles=new THREE.Points(plane,material),this.particles.rotation.x=this.degToRad(-0),this.scene.add(this.particles)}bindEvents(){window.addEventListener("resize",this.resizeListener)}resize(){this.canvasSize=600,this.csGlobe||(window.innerWidth>=960&&window.innerWidth<1200?this.canvasSize=800:window.innerWidth>=1200&&(this.canvasSize=1e3));const w=this.canvasSize,h=this.canvasSize;this.renderer.setSize(w,h),this.camera.aspect=w/h,this.camera.updateProjectionMatrix()}moveParticles(){this.particles.material.uniforms.time.value=this.time}render(){this.requestAnimationFrameID=requestAnimationFrame(this.render),this.time+=.03,this.moveParticles(),this.renderer.render(this.scene,this.camera)}degToRad(angle){return angle*Math.PI/180}pause(){cancelAnimationFrame(this.requestAnimationFrameID)}play(){cancelAnimationFrame(this.requestAnimationFrameID),this.requestAnimationFrameID=requestAnimationFrame(this.render)}destroy(){window.removeEventListener("resize",this.resizeListener),this.resizeListener=null,cancelAnimationFrame(this.requestAnimationFrameID),this.renderer.forceContextLoss(),this.renderer.context=null,this.renderer.domElement=null,this.renderer=null,this.scene=null,this.camera=null}}function initGlobeParticles(){let jsGlobe=document.querySelectorAll(".js-globe");for(let i=0;i<jsGlobe.length;i++){const thisGlobe=new Scene({el:jsGlobe[i],texture:jsGlobe[i].dataset.globeTexture});globes.push(thisGlobe)}}function globeParticlesRunner(){if(globes.length)for(var i=0;i<globes.length;i++)globes[i].destroy(),i+1==globes.length&&(globes=[],initGlobeParticles());else initGlobeParticles()}function mapRunner(){document.querySelector(".location-map__map")&&(this.map=document.querySelector(".location-map__map"),this.lng=this.map.dataset.lng,this.lat=this.map.dataset.lat,this.mapStyle=[{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#d3d3d3"}]},{featureType:"transit",stylers:[{color:"#808080"},{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"on"},{color:"#b3b3b3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ffffff"},{weight:1.8}]},{featureType:"road.local",elementType:"geometry.stroke",stylers:[{color:"#d7d7d7"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#ebebeb"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#a7a7a7"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"landscape",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#efefef"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#696969"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#737373"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#d6d6d6"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{},{featureType:"poi",elementType:"geometry.fill",stylers:[{color:"#dadada"}]}],this.map=new google.maps.Map(this.map,{zoom:16,center:new google.maps.LatLng(this.lng,this.lat),streetViewControl:!1,scrollwheel:!1,mapTypeControl:!1,disableDefaultUI:!0}),this.map.setOptions({styles:this.mapStyle}),this.pin={url:"/wp-content/themes/jointhedots/assets/images/map/pin.png",size:new google.maps.Size(88,105),scaledSize:new google.maps.Size(44,52),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(22,52)},this.marker=new google.maps.Marker({map:this.map,position:new google.maps.LatLng(this.lng,this.lat),icon:this.pin}))}let hideLogos=[],HideLogo=function(){this.logo=document.querySelector(".site-header__logo"),this.scrollingListener=this.scrolling.bind(this),window.addEventListener("scroll",this.scrollingListener)};function hideLogoInit(){const item=new HideLogo;hideLogos.push(item)}function hideLogoRunner(){if(hideLogos.length)for(let i=0;i<hideLogos.length;i++)hideLogos[i].destroy(),i+1==hideLogos.length&&(hideLogos=[],setTimeout(function(){hideLogoInit()},300));else hideLogoInit()}function lazyLoad(){document.querySelectorAll(".ll-bg-image, .ll-iframe, .ll-image").forEach(target=>{new IntersectionObserver((entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){const el=entry.target;el.classList.contains("ll-bg-image")?el.style.backgroundImage="url("+el.dataset.bg+")":el.classList.contains("ll-image")?el.src=el.dataset.bg:el.classList.contains("ll-iframe")&&(el.src=el.dataset.src),observer.disconnect()}})}).observe(target)})}HideLogo.prototype.scrolling=function(){window.pageYOffset>50?this.logo.classList.add("hidelogo"):this.logo.classList.remove("hidelogo")},HideLogo.prototype.destroy=function(){window.removeEventListener("scroll",this.scrollingListener)},window.addEventListener("load",function(){lazyLoad()});let allNavInverts=[],NavInvert=function(el){this.section=document.querySelector(".js-invert-nav"),this.footer=document.querySelector(".site-footer__footer"),this.section&&this.invert(),this.footerInvert()};function initNavInvert(){const thisNavInvert=new NavInvert;allNavInverts.push(thisNavInvert)}function navInvertRunner(){if(allNavInverts.length)for(let i=0;i<allNavInverts.length;i++)allNavInverts[i].destroy(),i+1==allNavInverts.length&&(allNavInverts=[],setTimeout(function(){initNavInvert()},300));else initNavInvert()}NavInvert.prototype.invert=function(){this.controller=new ScrollMagic.Controller,window.innerWidth>=960?(this.headerOffset=-88,this.footerOffset=104):(this.headerOffset=-52,this.footerOffset=59),this.scene=new ScrollMagic.Scene({triggerElement:this.section,triggerHook:0,offset:this.headerOffset}).setClassToggle(".site-header","invert").addTo(this.controller),this.scene=new ScrollMagic.Scene({triggerElement:this.section,triggerHook:1,offset:this.footerOffset}).setClassToggle(".contact-btn","invert").addTo(this.controller)},NavInvert.prototype.footerInvert=function(){this.footerController=new ScrollMagic.Controller,window.innerWidth>=960?(this.headerOffset=-88,this.footerOffset=104):(this.headerOffset=-52,this.footerOffset=59),this.footerScene=new ScrollMagic.Scene({triggerElement:this.footer,triggerHook:0,offset:this.headerOffset}).setClassToggle(".site-header","footer-invert").addTo(this.footerController),this.footerScene=new ScrollMagic.Scene({triggerElement:this.footer,triggerHook:1,offset:this.footerOffset}).setClassToggle(".contact-btn","footer-invert").addTo(this.footerController)},NavInvert.prototype.destroy=function(e){this.section&&(this.controller.destroy(!0),this.controller="",this.scene.destroy(!0),this.scene=""),this.footerController.destroy(!0),this.footerController="",this.footerScene.destroy(!0),this.footerScene=""};let offerings=[];var offeringReady=!1;const Offering=function(){this.currentSlide=0,this.defaultTimeout=100,this.timeout=100,this.globe=new Scene({el:document.querySelector(".js-globe-manual"),texture:document.querySelector(".js-globe-manual").dataset.globeTexture}),this.dotCarousel=!1,this.displacementLoop=new DisplacementLoop({parent:document.querySelector(".displacement-loop"),images:document.querySelectorAll(".displacement-loop__img"),displacementImage:document.querySelector(".displacement-loop").dataset.displacement}),this.keyListener=this.handleKeyPress.bind(this),document.addEventListener("keydown",this.keyListener),this.hammer=new Hammer(document.querySelector(".site-content__scroll"),{touchAction:"pan-x pan-y"}),this.hammer.get("pan").set({direction:Hammer.DIRECTION_VERTICAL}),this.hammer.on("panup pandown",this.swipeMove.bind(this)),this.pauseGlobe=window.innerWidth<1025,this.fixContainer(),this.wheelCallBack=this.mouseWheelMove.bind(this),removeWheelListener(document.querySelector(".site-content__scroll"),this.wheelCallBack),addWheelListener(document.querySelector(".site-content__scroll"),this.wheelCallBack),this.tlComplete=new TimelineMax({paused:!0,onComplete:function(){},onReverseComplete:function(){}}),this.currentPosition="firststart",this.transitionEndListener=this.transitionEnd.bind(this),this.exploreBtn=document.querySelector(".scroll-indicator__label"),this.exploreBtnListener=this.exploreBtnPress.bind(this),this.exploreBtn.addEventListener("click",this.exploreBtnListener),this.arrowBackBtn=document.querySelector(".offering__arrow-btn--back"),this.arrowNextBtn=document.querySelector(".offering__arrow-btn--next"),this.arrowBtnPressListener=this.arrowBtnPress.bind(this),this.arrowBackBtn.addEventListener("click",this.arrowBtnPressListener),this.arrowNextBtn.addEventListener("click",this.arrowBtnPressListener),this.setupAnims(),this.transition1(),this.transition2(),this.transition3(),this.transition4(),this.transition5(),this.productLinks()};function initOffering(){const homepageOffering=document.querySelectorAll(".offering");for(let i=0;i<homepageOffering.length;i++){const thisOffering=new Offering(homepageOffering[i]);offerings.push(thisOffering),console.log(offerings)}}function offeringRunner(){if(offerings.length)for(let i=0;i<offerings.length;i++)offerings[i].destroy(),console.log(offerings[i]),i+1==offerings.length&&(offerings=[],setTimeout(function(){initOffering()},300));else initOffering()}Offering.prototype.swipeMove=function(e){if(offeringReady){var direction,windowTop=window.pageYOffset||document.documentElement.scrollTop;if(e.direction==Hammer.DIRECTION_UP)5!=this.currentSlide&&(direction="next");else if(e.direction==Hammer.DIRECTION_DOWN){if(5==this.currentSlide&&0!=windowTop)return;direction="prev"}void 0===direction||this.moving||(this.moving=!0,this.moveSlide(direction))}},Offering.prototype.mouseWheelMove=function(e){if(offeringReady){var direction=e.deltaY>0?"next":"prev";if(5==this.currentSlide&&0!=windowTop||e.preventDefault(),removeWheelListener(document.querySelector(".site-content__scroll"),this.wheelCallBack),!this.moving){var windowTop=window.pageYOffset||document.documentElement.scrollTop;if(5==this.currentSlide&&windowTop>0)return void addWheelListener(document.querySelector(".site-content__scroll"),this.wheelCallBack);this.currentSlide,this.timeout=750,this.moving=!0,this.moveSlide(direction)}}},Offering.prototype.handleKeyPress=function(e){if(offeringReady){var windowTop=window.pageYOffset||document.documentElement.scrollTop;switch(e.key){case"ArrowUp":if(!this.moving){if(5==this.currentSlide&&windowTop>0)return;this.moving=!0,this.moveSlide("prev")}break;case"ArrowDown":this.moving||(this.moving=!0,this.moveSlide("next"))}}},Offering.prototype.exploreBtnPress=function(e){e.preventDefault(),this.moving||(this.moving=!0,this.moveSlide("next"))},Offering.prototype.arrowBtnPress=function(e){e.preventDefault(),this.moving||(e.currentTarget.classList.contains("offering__arrow-btn--next")?(this.moving=!0,this.moveSlide("next")):(this.moving=!0,this.moveSlide("prev")))},Offering.prototype.moveSlide=function(direction,step){var targetSlide,THAT=this;if(window.scrollTo(0,0),this.pauseGlobe&&THAT.globe.pause(),"manual"!=direction){if(0==this.currentSlide&"prev"==direction)return this.moving=!1,void addWheelListener(document.querySelector(".site-content__scroll"),this.wheelCallBack);if(5==this.currentSlide&"next"==direction)return this.moving=!1,this.currentSlide=5,void addWheelListener(document.querySelector(".site-content__scroll"),this.wheelCallBack);if(5==this.currentSlide&"prev"==direction)return void this.hammer.destroy();targetSlide="next"==direction?this.currentSlide+1:this.currentSlide-1}switch(targetSlide<5&&this.dotCarousel&&(this.dotCarousel.destroy(),this.dotCarousel=!1),targetSlide>0&&this.displacementLoop&&setTimeout(function(){THAT.displacementLoop.destroy(),THAT.displacementLoop=!1},250),targetSlide){case 0:this.displacementLoop=new DisplacementLoop({parent:document.querySelector(".displacement-loop"),images:document.querySelectorAll(".displacement-loop__img"),displacementImage:document.querySelector(".displacement-loop").dataset.displacement}),"prev"==direction&&(this.tlComplete.tweenFromTo(THAT.currentPosition,"firststart",{onComplete:THAT.transitionEndListener}),this.currentPosition="firststart");break;case 1:"next"==direction?(this.tlComplete.tweenFromTo(THAT.currentPosition,"secondstart",{onComplete:THAT.transitionEndListener}),this.currentPosition="secondstart"):(this.tlComplete.tweenFromTo(THAT.currentPosition,"firstend",{onComplete:THAT.transitionEndListener}),this.currentPosition="firstend");break;case 2:"next"==direction?(this.tlComplete.tweenFromTo(THAT.currentPosition,"thirdstart",{onComplete:THAT.transitionEndListener}),this.currentPosition="thirdstart"):(this.tlComplete.tweenFromTo(THAT.currentPosition,"secondend",{onComplete:THAT.transitionEndListener}),this.currentPosition="secondend");break;case 3:"next"==direction?(this.tlComplete.tweenFromTo(THAT.currentPosition,"fourthstart",{onComplete:THAT.transitionEndListener}),this.currentPosition="fourthstart"):(this.tlComplete.tweenFromTo(THAT.currentPosition,"thirdend",{onComplete:THAT.transitionEndListener}),this.currentPosition="thirdend");break;case 4:"next"==direction?(this.tlComplete.tweenFromTo(THAT.currentPosition,"fifthstart",{onComplete:THAT.transitionEndListener}),this.currentPosition="fifthstart"):this.tlComplete.tweenFromTo(THAT.currentPosition,"fourthend",{onComplete:function(){THAT.currentPosition="fourthend",this.timeout=1250,THAT.fixContainer(),document.body.style.overflow="hidden",THAT.transitionEnd()}});break;case 5:"next"==direction&&(window.scrollTo(0,0),this.dotCarousel=new DotCarousel(document.querySelector(".js-dot-carousel-manual")),this.tlComplete.tweenFromTo(THAT.currentPosition,"fifthend",{onComplete:function(){THAT.unFixContainer(),document.body.style.overflow="",THAT.globe.pause(),setTimeout(function(){window.scrollTo(0,0)},100)}}),this.currentPosition="fifthend")}this.currentSlide=targetSlide},Offering.prototype.setupAnims=function(){TweenLite.set([".offering__icon",".offering__title",".offering__info",".offering__link"],{x:-32,opacity:0}),this.transitionSizes(),this.handleResizeListener=this.transitionSizes.bind(this),window.addEventListener("resize",this.handleResizeListener)},Offering.prototype.transition1=function(){this.tlComplete.add("firststart"),this.tlComplete.to(".img-fader__header",.3,{opacity:0,y:32,ease:Power1.easeInOut,onStart:function(){document.querySelector(".img-fader__img-holder").classList.remove("reveal")},onReverseComplete:function(){document.querySelector(".img-fader__img-holder").classList.add("reveal")}}),this.tlComplete.to(".scroll-indicator__label",.3,{y:"100%",ease:Power1.easeInOut},"-=0.3"),this.tlComplete.to(".offering__globe canvas",.8,{opacity:.8,top:this.globeTop1,left:this.globeLeft1,ease:Power1.easeInOut,onStart:function(){document.querySelector(".offering__section#product1").classList.add("active")},onReverseComplete:function(){document.querySelector(".offering__section#product1").classList.remove("active")}}),this.tlComplete.to(".offering__pagination-dot--active",.2,{bottom:72,ease:Power2.easeInOut},"-=0.2"),this.tlComplete.to(".offering__pagination-dot--active",.2,{top:0,ease:Power2.easeInOut}),this.tlComplete.staggerTo([".offering__section#product1 .offering__icon",".offering__section#product1 .offering__title",".offering__section#product1 .offering__info",".offering__section#product1 .offering__link",".offering__controls"],.3,{x:0,opacity:1,ease:Power1.easeInOut},.1,"-=0.6"),this.tlComplete.add("firstend")},Offering.prototype.transition2=function(){this.tlComplete.add("secondstart"),this.tlComplete.to(".offering__section#product1 .container",.3,{y:-32,opacity:0,ease:Power1.easeInOut}),this.tlComplete.to(".offering__globe canvas",.8,{top:this.globeTop2,left:this.globeLeft2,rotation:40,ease:Power2.easeInOut,onComplete:function(){document.querySelector(".offering__section#product1").classList.remove("active"),document.querySelector(".offering__section#product2").classList.add("active")},onReverseComplete:function(){document.querySelector(".offering__section#product1").classList.add("active"),document.querySelector(".offering__section#product2").classList.remove("active")}},"-=0.1"),this.tlComplete.to(".offering__pagination-dot--active",.2,{bottom:48,ease:Power2.easeInOut},"-=0.6"),this.tlComplete.to(".offering__pagination-dot--active",.2,{top:24,ease:Power2.easeInOut}),this.tlComplete.staggerTo([".offering__section#product2 .offering__icon",".offering__section#product2 .offering__title",".offering__section#product2 .offering__info",".offering__section#product2 .offering__link"],.3,{x:0,opacity:1,ease:Power1.easeInOut},.1,"-=0.6"),this.tlComplete.add("secondend")},Offering.prototype.transition3=function(){this.tlComplete.add("thirdstart"),this.tlComplete.to(".offering__section#product2 .container",.3,{y:-32,opacity:0,ease:Power1.easeInOut}),this.tlComplete.to(".offering__globe canvas",.8,{top:this.globeTop3,left:this.globeLeft3,rotation:-30,ease:Power2.easeInOut,onStart:function(){document.querySelector(".offering__section#product2").classList.remove("active"),document.querySelector(".offering__section#product3").classList.add("active")},onReverseComplete:function(){document.querySelector(".offering__section#product2").classList.add("active"),document.querySelector(".offering__section#product3").classList.remove("active")}},"-=0.1"),this.tlComplete.to(".offering__pagination-dot--active",.2,{bottom:24,ease:Power2.easeInOut},"-=0.6"),this.tlComplete.to(".offering__pagination-dot--active",.2,{top:48,ease:Power2.easeInOut}),this.tlComplete.staggerTo([".offering__section#product3 .offering__icon",".offering__section#product3 .offering__title",".offering__section#product3 .offering__info",".offering__section#product3 .offering__link"],.3,{x:0,opacity:1,ease:Power1.easeInOut},.1,"-=0.6"),this.tlComplete.add("thirdend")},Offering.prototype.transition4=function(){this.tlComplete.add("fourthstart"),this.tlComplete.to(".offering__section#product3 .container",.3,{y:-32,opacity:0,ease:Power1.easeInOut}),this.tlComplete.to(".offering__globe canvas",.8,{top:"110%",left:"50%",rotation:-90,ease:Power2.easeInOut,onStart:function(){document.querySelector(".offering__section#product3").classList.remove("active"),document.querySelector(".offering__section#product4").classList.add("active")},onReverseComplete:function(){document.querySelector(".offering__section#product3").classList.add("active"),document.querySelector(".offering__section#product4").classList.remove("active")}},"-=0.1"),this.tlComplete.to(".offering__pagination-dot--active",.2,{bottom:0,ease:Power2.easeInOut},"-=0.4"),this.tlComplete.to(".offering__pagination-dot--active",.2,{top:72,ease:Power2.easeInOut}),this.tlComplete.staggerTo([".offering__section#product4 .offering__icon",".offering__section#product4 .offering__title",".offering__section#product4 .offering__info",".offering__section#product4 .offering__link"],.3,{x:0,opacity:1,ease:Power1.easeInOut},.1,"-=0.6"),this.tlComplete.add("fourthend")},Offering.prototype.transition5=function(){this.tlComplete.add("fifthstart"),this.tlComplete.to(".offering__section#product4 .container",.5,{y:-32,opacity:0,ease:Power1.easeInOut,onReverseComplete:function(){}}),this.tlComplete.to(".offering",.5,{autoAlpha:0,height:0,ease:Power2.easeInOut,onComplete:function(){document.querySelector(".offering__section#product4").classList.remove("active")},onReverseComplete:function(){document.querySelector(".offering__section#product4").classList.add("active")}},"-=0.3"),this.tlComplete.add("fifthend")},Offering.prototype.transitionSizes=function(){this.globeTop1="5%",this.globeLeft1="115%",window.innerWidth>=500&&window.innerWidth<600?(this.globeTop1="5%",this.globeLeft1="95%"):window.innerWidth>=600&&window.innerWidth<750?(this.globeTop1="5%",this.globeLeft1="115%"):window.innerWidth>=750&&window.innerWidth<1200?(this.globeTop1="5%",this.globeLeft1="95%"):window.innerWidth>1200&&(this.globeTop1="10%",this.globeLeft1="90%"),this.globeTop2="100%",this.globeLeft2="100%",window.innerWidth>=500&&window.innerWidth<600?(this.globeTop2="90%",this.globeLeft2="90%"):window.innerWidth>=600&&window.innerWidth<1200?(this.globeTop2="100%",this.globeLeft2="100%"):window.innerWidth>=1200&&(this.globeTop2="90%",this.globeLeft2="90%"),this.globeTop3="0%",this.globeLeft3="0%",window.innerWidth>=960&&window.innerWidth<1200?(this.globeTop3="5%",this.globeLeft3="5%"):window.innerWidth>=1200&&(this.globeTop3="10%",this.globeLeft3="10%")},Offering.prototype.transitionEnd=function(){var THAT=this;this.tlComplete.timeScale(1),this.pauseGlobe&&this.globe.play(),setTimeout(function(){addWheelListener(document.querySelector(".site-content__scroll"),THAT.wheelCallBack),THAT.moving=!1,THAT.timeout=THAT.defaultTimeout},THAT.timeout)},Offering.prototype.fixContainer=function(){document.querySelector(".barba-container").style.overflow="hidden",document.querySelector(".barba-container").style.width="100vw",document.querySelector(".barba-container").style.height=window.innerHeight+"px"},Offering.prototype.unFixContainer=function(){document.querySelector(".barba-container").style.overflow="",document.querySelector(".barba-container").style.width="",document.querySelector(".barba-container").style.height=""},Offering.prototype.jumpTo=function(index,fromDiffPage){window.scrollTo(0,0),this.fixContainer();var THAT=this;1==fromDiffPage&&(this.fromDiffPage=!0),this.oldIndex,this.newIndex=index,4!=this.newIndex&&this.dotCarousel&&(this.dotCarousel.destroy(),this.dotCarousel=!1),0!=this.newIndex&&this.displacementLoop&&(this.displacementLoop.destroy(),this.displacementLoop=!1);this.currentSlide,this.currentSlide;switch(this.tlComplete.timeScale(20),index){case 0:this.tlComplete.tweenFromTo(this.currentPosition,"firstend",{onComplete:THAT.transitionEndListener}),this.currentPosition="firstend";break;case 1:this.tlComplete.tweenFromTo(this.currentPosition,"secondend",{onComplete:THAT.transitionEndListener}),this.currentPosition="secondend";break;case 2:this.tlComplete.tweenFromTo(this.currentPosition,"thirdend",{onComplete:THAT.transitionEndListener}),this.currentPosition="thirdend";break;case 3:this.tlComplete.tweenFromTo(this.currentPosition,"fourthend",{onComplete:THAT.transitionEndListener}),this.currentPosition="fourthend";break;case 4:this.dotCarousel=new DotCarousel(document.querySelector(".js-dot-carousel-manual")),this.tlComplete.tweenFromTo(this.currentPosition,"fifthend",{onComplete:function(){THAT.unFixContainer(),document.body.style.overflow=""}}),this.currentPosition="fifthend"}document.body.style.overflow="hidden",this.oldIndex=this.newIndex,this.currentSlide=this.newIndex+1},Offering.prototype.productLinks=function(){this.productLink=document.querySelectorAll(".menu__link--product"),this.disableProductLinkListener=this.disableProductLink.bind(this);for(var i=0;i<this.productLink.length;i++)this.productLink[i].addEventListener("click",this.disableProductLinkListener)},Offering.prototype.disableProductLink=function(e){e.preventDefault(),this.moving=!0,initOpenMenu.closeMenu(),this.timeout=100;var i=Array.prototype.indexOf.call(this.productLink,e.currentTarget);this.jumpTo(i,!1)},Offering.prototype.destroy=function(){for(var i=0;i<this.productLink.length;i++)this.productLink[i].removeEventListener("click",this.disableProductLinkListener);window.removeEventListener("resize",this.handleResizeListener),this.hammer.destroy(),this.globe&&this.globe.destroy(),this.dotCarousel&&this.dotCarousel.destroy(),this.displacementLoop&&this.displacementLoop.destroy(),document.removeEventListener("keydown",this.keyListener),this.exploreBtn.removeEventListener("click",this.exploreBtnListener),this.arrowBackBtn.removeEventListener("click",this.arrowBtnPressListener),this.arrowNextBtn.removeEventListener("click",this.arrowBtnPressListener),this.unFixContainer()};let contactMenus=[],OpenContactMenu=function(){this.btn=document.querySelector(".contact-btn"),this.cta=document.querySelector(".contact-cta__cta"),this.menuOpen=!1,this.toggleBtnListener=this.toggleBtn.bind(this),this.closeMenuListener=this.closeMenu.bind(this),this.btn.addEventListener("click",this.toggleBtnListener),this.cta&&this.cta.addEventListener("click",this.toggleBtnListener)};function initContactMenu(){let thisOpenContactMenu=new OpenContactMenu;contactMenus.push(thisOpenContactMenu)}function contactMenuRunner(){if(contactMenus.length)for(let i=0;i<contactMenus.length;i++)contactMenus[i].destroy(),i+1==contactMenus.length&&(contactMenus=[],setTimeout(function(){initContactMenu()},300));else initContactMenu()}OpenContactMenu.prototype.toggleBtn=function(e){e.preventDefault(),0==this.menuOpen?(this.btn.removeEventListener("click",this.toggleBtnListener),this.cta&&this.cta.removeEventListener("click",this.toggleBtnListener),this.openMenu()):(this.btn.removeEventListener("click",this.toggleBtnListener),this.cta&&this.cta.removeEventListener("click",this.toggleBtnListener),this.closeMenu())},OpenContactMenu.prototype.openMenu=function(){const THAT=this;this.menuOpen=!0,this.openBtn(),this.openTL=new TimelineMax({onComplete:function(){THAT.btn.addEventListener("click",THAT.toggleBtnListener),THAT.cta&&THAT.cta.addEventListener("click",THAT.toggleBtnListener)}}),this.openTL.set("body",{className:"+=no-scroll"}),this.openTL.set(".contact-btn",{className:"+=menu-open"}),this.openTL.set(".location-menu",{visibility:"visible"}),this.openTL.staggerTo(".location-menu__link",1,{x:0,y:0,ease:Expo.easeInOut},.1),this.openTL.staggerTo(".location-menu__text",.5,{autoAlpha:1,ease:Power1.easeOut},.1,"-=0.3")},OpenContactMenu.prototype.closeMenu=function(){const THAT=this;this.menuOpen=!1,this.closeBtn(),this.closeTL=new TimelineMax({onComplete:function(){THAT.btn.addEventListener("click",THAT.toggleBtnListener),THAT.cta&&THAT.cta.addEventListener("click",THAT.toggleBtnListener),this.set([".location-menu",".location-menu__link",".location-menu__text"],{clearProps:"all"}),this.set("body",{className:"-=no-scroll"}),this.set(".contact-btn",{className:"-=menu-open"})}}),window.innerWidth>=960?this.closeTL.staggerTo(".location-menu__link",1,{y:"100%",ease:Expo.easeInOut},.1):this.closeTL.staggerTo(".location-menu__link",1,{x:"-100%",ease:Expo.easeInOut},.1)},OpenContactMenu.prototype.openBtn=function(){this.btnAnimOpen=new TimelineMax,this.btnAnimOpen.to(".contact-btn .speech-bubble",.3,{opacity:0,ease:Power1.easeOut}),this.btnAnimOpen.to(".contact-btn__close-icon",.3,{opacity:1,ease:Power1.easeOut})},OpenContactMenu.prototype.closeBtn=function(){this.btnAnimClose=new TimelineMax({onComplete:function(){this.set([".contact-btn__close-icon",".contact-btn .speech-bubble"],{clearProps:"all"})}}),this.btnAnimClose.to(".contact-btn__close-icon",.3,{opacity:0,ease:Power1.easeOut}),this.btnAnimClose.to(".contact-btn .speech-bubble",.3,{opacity:1,ease:Power1.easeOut})},OpenContactMenu.prototype.destroy=function(e){this.openTL=null,this.closeTL=null,this.btnAnimOpen=null,this.btnAnimClose=null,this.btn.removeEventListener("click",this.toggleBtnListener),this.toggleBtnListener=null,this.closeMenuListener=null};let OpenMenu=function(){this.btn=document.querySelector(".site-header__menu-btn"),this.logo=document.querySelector(".site-header__logo"),this.menuOpen=!1,this.toggleBtnListener=this.toggleBtn.bind(this),this.closeMenuListener=this.closeMenu.bind(this),this.btn.addEventListener("click",this.toggleBtnListener)};OpenMenu.prototype.toggleBtn=function(e){e.preventDefault(),0==this.menuOpen?this.openMenu():this.closeMenu()},OpenMenu.prototype.openMenu=function(){const THAT=this;this.menuOpen=!0,this.btn.removeEventListener("click",this.toggleBtnListener),this.logo.addEventListener("click",this.toggleBtnListener),this.openBtn(),this.openTL=new TimelineMax({onComplete:function(){THAT.btn.addEventListener("click",THAT.toggleBtnListener),this.set([".layout",".dot-carousel",".basic-header",".bg-media",".contact-cta__holder",".mailing-list",".site-footer__footer"],{y:-80})}}),this.openTL.set("body",{className:"+=no-scroll"}),this.openTL.set(".menu",{visibility:"visible"}),this.openTL.set(".site-header",{className:"+=menu-invert"}),this.openTL.to(".menu__bg",1.2,{delay:.1,y:0,ease:Expo.easeOut}),this.openTL.to([".layout",".dot-carousel",".basic-header",".bg-media",".contact-cta__holder",".mailing-list",".site-footer__footer"],1.5,{y:80,ease:Expo.easeOut},"-=1.2"),this.openTL.to(".contact-btn",.3,{autoAlpha:0,ease:Expo.easeOut},"-=1.5"),this.openTL.to(".menu__primary .pretitle",.5,{y:0,opacity:.3,ease:Power1.easeOut},"-=1.2"),this.openTL.staggerTo(".menu__primary .menu__item",.5,{y:0,opacity:1,ease:Power1.easeOut},.1,"-=0.7"),this.openTL.to(".menu__secondary .pretitle",.5,{y:0,opacity:.3,ease:Power1.easeOut},"-=0.5"),this.openTL.staggerTo(".menu__secondary .menu__item",.5,{y:0,opacity:1,ease:Power1.easeOut},.1,"-=0.7"),this.openTL.to(".menu__locations .pretitle",.5,{y:0,opacity:.3,ease:Power1.easeOut},"-=0.5"),this.openTL.staggerTo(".menu__locations .menu__item",.5,{y:0,opacity:1,ease:Power1.easeOut},.1,"-=0.7")},OpenMenu.prototype.closeMenu=function(ignoreOverflow){const THAT=this;this.menuOpen=!1,this.btn.removeEventListener("click",this.toggleBtnListener),this.logo.removeEventListener("click",this.toggleBtnListener),this.closeBtn(),this.closeTL=new TimelineMax({onComplete:function(){this.set([".menu",".menu .container",".menu .pretitle",".menu__item",".menu__bg",".layout",".dot-carousel",".basic-header",".bg-media",".contact-cta__holder",".mailing-list",".site-footer__footer",".contact-btn"],{clearProps:"all"}),THAT.btn.addEventListener("click",THAT.toggleBtnListener)}}),this.closeTL.set(".site-header",{className:"-=menu-invert"}),this.closeTL.to(".menu .container",.5,{y:24,autoAlpha:0,ease:Power1.easeOut,onComplete:function(){TweenLite.set("body",{className:"-=no-scroll"})}}),this.closeTL.to(".menu__bg",1.2,{y:"100%",ease:Expo.easeOut},"-=0.2"),this.closeTL.to([".layout",".dot-carousel",".basic-header",".bg-media",".contact-cta__holder",".mailing-list",".site-footer__footer"],1.5,{y:0,ease:Expo.easeOut},"-=1.2"),this.closeTL.to(".contact-btn",.3,{autoAlpha:1,ease:Expo.easeOut},"-=1")},OpenMenu.prototype.openBtn=function(){this.btnAnimOpen=new TimelineMax,this.btnAnimOpen.to(".site-header__menu-dot--1",.3,{x:3,scale:.5,ease:Power1.easeOut}),this.btnAnimOpen.to(".site-header__menu-dot--2",.3,{x:-3,scale:.5,ease:Power1.easeOut},"-=0.3"),this.btnAnimOpen.to(".site-header__close-line--1",.3,{scaleX:1,ease:Power1.easeOut},"-=0.1"),this.btnAnimOpen.to(".site-header__close-line--2",.3,{scaleY:1,ease:Power1.easeOut},"-=0.3")},OpenMenu.prototype.closeBtn=function(){this.btnAnimClose=new TimelineMax({onComplete:function(){this.set([".site-header__close-line--1",".site-header__close-line--2",".site-header__menu-dot--1",".site-header__menu-dot--2"],{clearProps:"all"})}}),this.btnAnimClose.to(".site-header__close-line--1",.3,{scaleX:0,ease:Power1.easeOut}),this.btnAnimClose.to(".site-header__close-line--2",.3,{scaleY:0,ease:Power1.easeOut},"-=0.3"),this.btnAnimClose.to(".site-header__menu-dot--1",.3,{x:0,scale:1,ease:Power1.easeOut}),this.btnAnimClose.to(".site-header__menu-dot--2",.3,{x:0,scale:1,ease:Power1.easeOut},"-=0.3")};const initOpenMenu=new OpenMenu;var scrollMagicInviews=[],ScrollMagicInview=function(el){this.jsInview=el,this.controller=new ScrollMagic.Controller({globalSceneOptions:{duration:0,offset:100,triggerHook:100}}),this.addClasses()};function initScrollMagicInview(){const scrollMagicInview=document.querySelectorAll(".js-inview");for(let i=0;i<scrollMagicInview.length;i++){const thisScrollMagicInview=new ScrollMagicInview(scrollMagicInview[i]);scrollMagicInviews.push(thisScrollMagicInview)}}function scrollMagicInviewRunner(){if(scrollMagicInviews.length)for(let i=0;i<scrollMagicInviews.length;i++)scrollMagicInviews[i].destroy(),i+1==scrollMagicInviews.length&&(scrollMagicInviews=[],setTimeout(function(){initScrollMagicInview()},300));else initScrollMagicInview()}function offeringIntroAnim(delay){return this.tl=new TimelineMax({delay:delay,onComplete:function(){offeringReady=!0}}),this.tl.fromTo(".img-fader__header",1,{x:-32,opacity:0},{x:0,opacity:1,onStart:function(){TweenLite.set(".img-fader__img-holder",{className:"+=reveal"})}}),this.tl.fromTo(".scroll-indicator__label",1,{y:"100%"},{y:"0%"},"-=0.8"),this.tl.fromTo(".scroll-indicator__line",1,{opacity:0},{opacity:1},"-=0.75"),this.tl.to([".site-header__logo",".site-header__menu-btn",".contact-btn"],1,{opacity:1},"-=1"),this.tl}function offset(el){var rect=el.getBoundingClientRect(),scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,scrollTop=window.pageYOffset||document.documentElement.scrollTop;return{top:rect.top+scrollTop,left:rect.left+scrollLeft}}ScrollMagicInview.prototype.addClasses=function(){this.jsInview.classList.add("not-inview"),this.setupScene()},ScrollMagicInview.prototype.setupScene=function(){this.notInview=document.querySelectorAll(".not-inview");for(var i=0;i<this.notInview.length;i++)new ScrollMagic.Scene({triggerElement:this.notInview[i]}).setClassToggle(this.notInview[i],"is-inview").addTo(this.controller)},ScrollMagicInview.prototype.destroy=function(){this.controller.destroy(!0),this.controller="",this.jsInview.classList.remove("not-inview")};let smoothScroll=[],SmoothScroller=function(el){this.link=el,this.anchorID=this.link.dataset.scrollerpoint,this.buttonClickListener=this.buttonClick.bind(this),this.link.addEventListener("click",this.buttonClickListener)};function initSmoothScroll(){const smoothScroller=document.querySelectorAll(".js-smooth-scroller");for(let i=0;i<smoothScroller.length;i++){const thisSmoothScroll=new SmoothScroller(smoothScroller[i]);smoothScroll.push(thisSmoothScroll)}}function smoothScrollRunner(){if(smoothScroll.length)for(let i=0;i<smoothScroll.length;i++)smoothScroll[i].destroy(),i+1==smoothScroll.length&&(smoothScroll=[],setTimeout(function(){initSmoothScroll()},300));else initSmoothScroll()}SmoothScroller.prototype.buttonClick=function(e){e.preventDefault(),this.anchorIDPos=document.getElementById(this.anchorID),this.anchorOffset=offset(this.anchorIDPos),window.innerWidth>=960?this.offset=200:this.offset=90,this.scrollPoint=this.anchorOffset.top-this.offset,TweenLite.to(window,.5,{scrollTo:this.scrollPoint,ease:Power1.easeInOut})},SmoothScroller.prototype.destroy=function(){this.link.removeEventListener("click",this.buttonClickListener)};var videoLightboxes=[],VideoLightbox=function(el){this.holder=el,this.openBtn=this.holder.querySelectorAll("[data-video-lb]"),document.querySelector(".video-lightbox")||this.createModal(),this.externalVideo=!1,this.setupBtns()};function videoLightboxInit(){for(var videoLightboxItems=document.querySelectorAll(".js-video-lightbox"),vli=0;vli<videoLightboxItems.length;vli++){var thisVideoLightbox=new VideoLightbox(videoLightboxItems[vli]);videoLightboxes.push(thisVideoLightbox)}}function videoLightboxRunner(){if(videoLightboxes.length)for(var i=0;i<videoLightboxes.length;i++)videoLightboxes[i].destroy(),i+1==videoLightboxes.length&&(videoLightboxes=[],setTimeout(function(){videoLightboxInit()},500));else videoLightboxInit()}VideoLightbox.prototype.createModal=function(){this.buildLightbox=document.createElement("section"),this.buildLightbox.className="video-lightbox pos--fix z--10 o--0",this.buildLightbox.innerHTML='\n    <div class="video-lightbox__holder pos--rel o--0">\n      <a class="video-lightbox__close pos--abs z--2" href="#"><span></span></a>\n      <div class="video-lightbox__video-holder pos--rel z--1"></div>\n    </div>\n  ',document.body.appendChild(this.buildLightbox)},VideoLightbox.prototype.setupBtns=function(){this.videoHolder=document.querySelector(".video-lightbox__video-holder"),this.closeBtn=document.querySelector(".video-lightbox__close");for(var i=0;i<this.openBtn.length;i++)this.openBtn[i].addEventListener("click",this.openModal.bind(this));this.closeBtn.addEventListener("click",this.closeModal.bind(this))},VideoLightbox.prototype.openModal=function(e){e.preventDefault(),this.videoURL=e.currentTarget.dataset.videoLb,e.currentTarget.classList.contains("js-video-lightbox__iframe")?(this.videoHolder.innerHTML='<iframe class="video-lightbox__video video-lightbox__video--iframe" src="'+this.videoURL+'?autoplay=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>',this.externalVideo=!0):(this.videoHolder.innerHTML='<video class="video-lightbox__video" controls><source src="'+this.videoURL+'" type="video/mp4" /></video>',document.querySelector(".video-lightbox__video").play()),TweenMax.to(".video-lightbox",.2,{autoAlpha:1}),TweenMax.to(".video-lightbox__holder",.5,{delay:.3,opacity:1,y:0})},VideoLightbox.prototype.closeModal=function(e){e.preventDefault(),this.externalVideo?this.videoHolder.innerHTML="":document.querySelector(".video-lightbox__video").pause(),TweenMax.to(".video-lightbox",.2,{autoAlpha:0}),TweenMax.to(".video-lightbox__holder",.2,{opacity:0,y:40})},VideoLightbox.prototype.destroy=function(){this.buildLightbox=document.querySelector(".video-lightbox");for(var i=0;i<this.openBtn.length;i++)this.openBtn[i].removeEventListener("click",this.openModal.bind(this));this.buildLightbox&&(this.buildLightbox.parentNode.removeChild(this.buildLightbox),this.closeBtn.removeEventListener("click",this.closeModal.bind(this)))},function(window,document){var _addEventListener,_removeEventListener,support,prefix="";function _addWheelListener(elem,eventName,callback,useCapture){elem[_addEventListener](prefix+eventName,"wheel"==support?callback:function(originalEvent){!originalEvent&&(originalEvent=window.event);var event={originalEvent:originalEvent,target:originalEvent.target||originalEvent.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==originalEvent.type?0:1,deltaX:0,deltaY:0,deltaZ:0,preventDefault:function(){originalEvent.preventDefault?originalEvent.preventDefault():originalEvent.returnValue=!1}};return"mousewheel"==support?(event.deltaY=-.025*originalEvent.wheelDelta,originalEvent.wheelDeltaX&&(event.deltaX=-.025*originalEvent.wheelDeltaX)):event.deltaY=originalEvent.deltaY||originalEvent.detail,callback(event)},useCapture||!1)}function _removeWheelListener(elem,eventName,callback,useCapture){elem[_removeEventListener](prefix+eventName,callback,useCapture||!1)}window.addEventListener?(_addEventListener="addEventListener",_removeEventListener="removeEventListener"):(_addEventListener="attachEvent",_removeEventListener="detachEvent",prefix="on"),support="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",window.addWheelListener=function(elem,callback,useCapture){_addWheelListener(elem,support,callback,useCapture),"DOMMouseScroll"==support&&_addWheelListener(elem,"MozMousePixelScroll",callback,useCapture)},window.removeWheelListener=function(elem,callback,useCapture){_removeWheelListener(elem,support,callback,useCapture),"DOMMouseScroll"==support&&_removeWheelListener(elem,"MozMousePixelScroll",callback,useCapture)}}(window,document),Barba.Pjax.start(),Barba.Utils.xhrTimeout=1e5,Barba.Prefetch.init();var clicked,homepagePosition,transition="defaultTransition",homeExit=!1,Homepage=Barba.BaseView.extend({namespace:"home-page",onEnter:function(){document.body.style.overflow="hidden"},onEnterCompleted:function(){},onLeave:function(){document.querySelector(".site-header").classList.remove("invert"),document.querySelector(".contact-btn").classList.remove("invert")},onLeaveCompleted:function(){document.body.style.overflow=""}});Homepage.init(),Barba.BaseTransition.loadImages=function(){const THAT=this;return new Promise(function(resolve){var imgLoad=imagesLoaded(THAT.newContainer,{background:!0}),imgPercent=100/imgLoad.images.length,count=1;imgLoad.on("progress",function(instance,image){var progress=count*imgPercent;TweenLite.to(".progress__bar",.5,{width:progress+"%",ease:Sine.easeOut}),count++}),imgLoad.on("always",function(instance){TweenLite.to(".progress__bar",.5,{width:"100%",ease:Sine.easeOut,onComplete:function(){resolve(!0),TweenLite.set(".progress__bar",{clearProps:"all"})}})})})};var defaultTransition=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.switch.bind(this)).then(this.loadImages.bind(this)).then(this.fadeIn.bind(this))},fadeOut:function(){const TL=new TimelineMax({paused:!0});return TL.to(".loading",.5,{autoAlpha:1,ease:Power1.easeInOut}),TL.to(this.oldContainer,.2,{opacity:0,ease:Power1.easeInOut}),new Promise(function(resolve){TL.eventCallback("onComplete",function(){resolve(!0)}),TL.play()})},switch:function(){return this.oldContainer.style.display="none",this.newContainer.style.visibility="visible",this.newContainer.style.opacity=0,document.body.scrollTop=0,document.documentElement.scrollTop=0,new Promise(function(resolve){resolve(!0)})},fadeIn:function(){TweenMax.defaultEase=Power1.easeInOut;const TL=new TimelineMax;TL.to(this.newContainer,.2,{opacity:1}),TL.to(".loading",.5,{autoAlpha:0,ease:Power1.easeInOut}),this.done()}}),menuTransition=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.switch.bind(this)).then(this.loadImages.bind(this)).then(this.fadeIn.bind(this))},fadeOut:function(){const TL=new TimelineMax({paused:!0});return TL.to(this.oldContainer,.2,{opacity:0,ease:Power1.easeInOut}),new Promise(function(resolve){TL.eventCallback("onComplete",function(){resolve(!0)}),TL.play()})},switch:function(){return this.oldContainer.style.display="none",this.newContainer.style.visibility="visible",this.newContainer.style.opacity=0,document.body.scrollTop=0,document.documentElement.scrollTop=0,new Promise(function(resolve){resolve(!0)})},fadeIn:function(){TweenMax.defaultEase=Power1.easeInOut,new TimelineMax({onComplete:function(){initOpenMenu.closeMenu()}}).to(this.newContainer,.2,{opacity:1}),this.done()}}),contactMenuTransition=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.switch.bind(this)).then(this.loadImages.bind(this)).then(this.fadeIn.bind(this))},fadeOut:function(){const TL=new TimelineMax({paused:!0});return TL.to(this.oldContainer,.2,{opacity:0,ease:Power1.easeInOut}),new Promise(function(resolve){TL.eventCallback("onComplete",function(){resolve(!0)}),TL.play()})},switch:function(){return this.oldContainer.style.display="none",this.newContainer.style.visibility="visible",this.newContainer.style.opacity=0,document.body.scrollTop=0,document.documentElement.scrollTop=0,new Promise(function(resolve){resolve(!0)})},fadeIn:function(){TweenMax.defaultEase=Power1.easeInOut;const TL=new TimelineMax({onComplete:function(){this.set([".location-menu",".location-menu__link",".location-menu__text",".contact-btn__close-icon",".contact-btn .speech-bubble"],{clearProps:"all"}),this.set("body",{className:"-=no-scroll"}),this.set(".contact-btn",{className:"-=menu-open"})}});TL.to(this.newContainer,.2,{opacity:1}),window.innerWidth>=960?TL.staggerTo(".location-menu__link",1,{y:"100%",ease:Expo.easeInOut},.1):TL.staggerTo(".location-menu__link",1,{x:"-100%",ease:Expo.easeInOut},.1),TL.to(".contact-btn__close-icon",.3,{opacity:0,ease:Power1.easeOut},"-=1"),TL.to(".contact-btn .speech-bubble",.3,{opacity:1,ease:Power1.easeOut},"-=0.3"),this.done()}}),caseStudyTransition=Barba.BaseTransition.extend({start:function(){Promise.all([this.newContainerLoading,this.fadeOut()]).then(this.switch.bind(this)).then(this.loadImages.bind(this)).then(this.fadeIn.bind(this))},fadeOut:function(){document.body.style.overflow="hidden",document.body.style.height="100vh";let activeImg=document.querySelector(".displacement-carousel__img.active").dataset.bg;document.querySelector(".displacement-carousel__images").style.backgroundImage='url("'+activeImg+'")';const TL=new TimelineMax({paused:!0});return TL.to(window,.5,{scrollTo:".dot-carousel__holder"}),TL.to([".dot-carousel__carousel",".dot-carousel__buttons",".dot-carousel__indicator",".dot-carousel__fake-carousel",".displacement-carousel canvas",".dot-carousel__header-holder",".logo-grid",".swipe-items"],.5,{autoAlpha:0,ease:Power1.easeInOut},"-=0.25"),TL.to(".dot-carousel__holder",.5,{minHeight:window.innerHeight}),TL.to(".dot-carousel__img-holder",.5,{width:window.innerWidth,height:window.innerHeight,paddingBottom:0,top:0,left:0,x:0,y:0,borderRadius:0,ease:Power1.easeInOut},"-=0.5"),TL.to([".js-invert-nav",".site-footer"],.2,{autoAlpha:0},"-=0.2"),TL.to(".dot-carousel__img-overlay",.5,{opacity:0,ease:Power1.easeInOut},"-=0.5"),TL.to(".displacement-carousel",.5,{width:"100%",height:"100%",ease:Power1.easeInOut},"-=0.5"),TL.to(".displacement-carousel__images",.5,{opacity:.3,scale:1,ease:Power1.easeInOut},"-=0.5"),window.innerWidth>=750&&(TL.to(".dot-carousel__holder",.5,{minHeight:0,height:500,ease:Power1.easeInOut}),TL.to(".dot-carousel__img-holder",.5,{height:500,ease:Power1.easeInOut},"-=0.5")),window.innerWidth>=1200&&TL.to(".dot-carousel__holder .container",.5,{maxWidth:"100%",ease:Power1.easeInOut},"-=1"),TL.to([".site-content__fixed-bg"],.5,{autoAlpha:0,ease:Power1.easeInOut},"-=0.25"),new Promise(function(resolve){TL.eventCallback("onComplete",function(){resolve(!0)}),TL.play()})},switch:function(){return this.oldContainer.style.display="none",this.newContainer.style.visibility="visible",this.newContainer.style.opacity=1,document.body.scrollTop=0,document.documentElement.scrollTop=0,TweenLite.set([".bg-media__logo",".bg-media__header",".bg-media__subheader",".layout"],{y:32,autoAlpha:0}),TweenLite.set(".scroll-indicator",{autoAlpha:0}),new Promise(function(resolve){resolve(!0)})},fadeIn:function(){document.body.style.overflow="",document.body.style.height="",new TimelineMax({onComplete:function(){this.set([".bg-media__logo",".bg-media__header",".bg-media__subheader",".scroll-indicator"],{clearProps:"all"})}}).staggerTo([".bg-media__logo",".bg-media__header",".bg-media__subheader",".scroll-indicator",".layout"],.5,{y:0,autoAlpha:1,ease:Power1.easeInOut},.1),this.done()}});function initLoadFunctions(initial){const NAMESPACE=document.querySelector(".barba-container").dataset.namespace;if(document.body.setAttribute("class",NAMESPACE),globeParticlesRunner(),offeringRunner(),scrollMagicInviewRunner(),clockRunner(),basicCarouselRunner(),dotCarouselRunner(),autoplayVideoRunner(),videoLightboxRunner(),navInvertRunner(),contactMenuRunner(),smoothScrollRunner(),hideLogoRunner(),!initial){mapRunner(),lazyLoad();for(var signupForms=document.querySelectorAll(".wpcf7-form"),sfi=0;sfi<signupForms.length;sfi++)wpcf7.initForm(signupForms[sfi])}}Barba.Dispatcher.on("linkClicked",function(HTMLElement,MouseEvent){offeringReady=!1,this.clicked=HTMLElement,transition="defaultTransition","menu-link"==this.clicked.dataset.transition&&(transition="menuTransition"),"contact-link"==this.clicked.dataset.transition&&(transition="contactMenuTransition"),"case-study-link"==this.clicked.dataset.transition&&(transition="caseStudyTransition"),void 0!==this.clicked.dataset.hpposition&&(homepagePosition=this.clicked.parentNode.dataset.position)}),Barba.Pjax.getTransition=function(){return"defaultTransition"==transition?defaultTransition:"menuTransition"==transition?menuTransition:"contactMenuTransition"==transition?contactMenuTransition:"caseStudyTransition"==transition?caseStudyTransition:void 0},Barba.Dispatcher.on("transitionCompleted",function(currentStatus,oldStatus){initLoadFunctions(!1),this.clicked&&this.clicked.classList.contains("menu__link--product")?(this.productLinks=document.querySelectorAll(".menu__link--product"),this.productLinkIndex=Array.prototype.indexOf.call(this.productLinks,this.clicked),offerings[0].jumpTo(this.productLinkIndex,!0),offeringReady=!0):homepagePosition&&document.querySelector(".offering")&&!this.clicked?(offerings[0].jumpTo(Number(homepagePosition-1),!0),offeringReady=!0,homepagePosition=""):document.querySelector(".offering")&&homeExit?(offerings[0].jumpTo(4,!0),offeringReady=!0):document.querySelector(".offering")&&offeringIntroAnim(1),gtag("config","UA-169633648-1",{page_location:currentStatus.url}),this.clicked="",homeExit=!0,transition="defaultTransition"});offeringReady=!1;var Preloader=function(){const THAT=this;this.preloader=document.querySelector(".preloader"),this.tl=new TimelineMax({delay:1,onStart:function(){initLoadFunctions(!0),window.scroll(0,0),document.body.style.overflow="hidden"},onComplete:function(){document.querySelector(".offering")||(document.body.style.overflow=""),offeringReady=!0,this.set([".site-header__logo",".site-header__menu-btn",".contact-btn",".img-fader__header",".img-fader__img-holder",".scroll-indicator__label",".scroll-indicator__line"],{clearProps:"all"}),THAT.preloader.parentNode.removeChild(THAT.preloader)}}),TweenLite.defaultEase=Expo.easeOut,this.setAnims()};Preloader.prototype.setAnims=function(){document.querySelector(".offering")&&this.tl.set([".site-header__logo",".site-header__menu-btn",,".contact-btn"],{opacity:0}),this.timeline()},Preloader.prototype.timeline=function(){this.tl.to(".preloader__ask",.8,{opacity:1,scale:1}),this.tl.to(".preloader__ask",.8,{opacity:0,scale:.75}),this.tl.to(".preloader__listen",.8,{opacity:1,scale:1},"-=0.7"),this.tl.to(".preloader__listen",.8,{opacity:0,scale:.75}),this.tl.to(".preloader__observe",.8,{opacity:1,scale:1},"-=0.7"),this.tl.to(".preloader__observe",.8,{opacity:0,scale:.75}),this.tl.to(".preloader__logo",.8,{opacity:1,scale:1},"-=0.7"),this.tl.to(".preloader__logo",.8,{delay:1,opacity:0}),this.tl.to(".preloader",.4,{opacity:0,ease:Power1.easeOut},"-=0.4"),document.querySelector(".offering")&&this.tl.add(offeringIntroAnim())},document.querySelector(".preloader")&&new Preloader;